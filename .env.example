# ============================================================
# 环境变量示例 - Docker 部署配置
# 复制为 .env 后按需填写，用于 docker-compose 部署
# ============================================================

# ⚠️ 重要说明：
# 1. OpenAI API Key、模型配置、Embedding 配置 → 在前端"⚙️ 模型配置"页面设置（存储在浏览器本地）
# 2. 数据库、Redis 配置 → 在此 .env 文件配置（服务器端）

# ============================================================
# 🔹 前端配置（不需要在此文件配置）
# ============================================================
# 以下配置在前端"⚙️ 模型配置"页面填写，保存在浏览器 localStorage：
# 
# 【文本生成模型】
# - OPENAI_API_KEY          → API 密钥
# - OPENAI_BASE_URL         → API 地址
# - TEXT_MODEL_NAME         → 文本模型（如 gpt-4o）
# - VISION_MODEL_NAME       → 视觉模型
# - DISABLE_VISION          → 是否禁用图片识别
# - MAX_IMAGES_PER_BATCH    → 每批最大图片数
# - IMAGE_MAX_SIZE          → 图片压缩尺寸
# - IMAGE_QUALITY           → 图片压缩质量
# - MAX_SECTION_CHARS       → 单章节字符上限
#
# 【知识库 Embedding 模型】
# - EMBEDDING_API_KEY       → Embedding API 密钥
# - EMBEDDING_BASE_URL      → Embedding API 地址
# - EMBEDDING_MODEL         → Embedding 模型（如 text-embedding-3-small）
#
# 前端配置存储在浏览器本地，每次请求时动态发送给后端，无需在服务器配置。

# ============================================================
# 🔹 服务器端必须配置（Docker 部署必需）
# ============================================================

# === 1. PostgreSQL 数据库配置（必填） ===
POSTGRES_USER=testcase
POSTGRES_PASSWORD=testcase_password_change_me_in_production
POSTGRES_DB=testcase_agent
# 注意：DATABASE_URL 会由 docker-compose 自动构建

# === 2. Redis 缓存配置（必填） ===
REDIS_PASSWORD=redis_password_change_me_in_production
# 注意：REDIS_URL 会由 docker-compose 自动构建

# ============================================================
# 📝 使用说明
# ============================================================
# 
# 步骤 1：复制此文件为 .env
#   cp .env.example .env
#
# 步骤 2：修改数据库密码（⚠️ 必须修改）
#   - POSTGRES_PASSWORD       → 修改为强密码（20+ 位随机字符）
#   - REDIS_PASSWORD          → 修改为强密码（20+ 位随机字符）
#
# 步骤 3：部署
#   ./scripts/deploy.sh
#
# 步骤 4：前端配置（⚠️ 重要）
#   访问 http://your-server-ip
#   点击"⚙️ 模型配置"标签
#   填写以下配置：
#     - OPENAI_API_KEY        → 文本生成 API Key
#     - TEXT_MODEL_NAME       → 文本模型（如 gpt-4o）
#     - EMBEDDING_API_KEY     → 知识库 Embedding API Key
#     - EMBEDDING_MODEL       → Embedding 模型（如 text-embedding-3-small）
#   点击"保存配置"

# ============================================================
# 🔒 安全建议
# ============================================================
# 1. 生成强密码：openssl rand -base64 32
# 2. 不要将 .env 文件提交到 Git（已在 .gitignore）
# 3. 生产环境建议启用 HTTPS（参考 DEPLOYMENT.md）
# 4. 定期更换密码
# 5. 定期备份数据：./scripts/backup.sh

[Unit]
Description=Testcase Agent (Flask + Gunicorn)
After=network.target

[Service]
Type=simple
User=ubuntu
WorkingDirectory=/opt/testcase-agent
Environment=PYTHONUNBUFFERED=1
# 可按需调整全局限流
Environment=MAX_CONCURRENT_MODEL_CALLS=2
Environment=MIN_CALL_INTERVAL_MS=0
ExecStart=/opt/testcase-agent/.venv/bin/gunicorn -w 2 -k gthread --threads 4 -t 180 -b 127.0.0.1:5001 app:app
Restart=always
RestartSec=3

[Install]
WantedBy=multi-user.target
